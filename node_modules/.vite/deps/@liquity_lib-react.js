import {
  require_react
} from "./chunk-PAMYMUU6.js";
import {
  __commonJS
} from "./chunk-W7S2ME4R.js";

// ../lib-react/dist/src/components/LiquityStoreProvider.js
var require_LiquityStoreProvider = __commonJS({
  "../lib-react/dist/src/components/LiquityStoreProvider.js"(exports) {
    "use strict";
    var __createBinding = exports && exports.__createBinding || (Object.create ? function(o, m, k, k2) {
      if (k2 === void 0)
        k2 = k;
      Object.defineProperty(o, k2, { enumerable: true, get: function() {
        return m[k];
      } });
    } : function(o, m, k, k2) {
      if (k2 === void 0)
        k2 = k;
      o[k2] = m[k];
    });
    var __setModuleDefault = exports && exports.__setModuleDefault || (Object.create ? function(o, v) {
      Object.defineProperty(o, "default", { enumerable: true, value: v });
    } : function(o, v) {
      o["default"] = v;
    });
    var __importStar = exports && exports.__importStar || function(mod) {
      if (mod && mod.__esModule)
        return mod;
      var result = {};
      if (mod != null) {
        for (var k in mod)
          if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k))
            __createBinding(result, mod, k);
      }
      __setModuleDefault(result, mod);
      return result;
    };
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.LiquityStoreProvider = exports.LiquityStoreContext = void 0;
    var react_1 = __importStar(require_react());
    exports.LiquityStoreContext = react_1.createContext(void 0);
    var LiquityStoreProvider = ({ store, loader, children }) => {
      const [loadedStore, setLoadedStore] = react_1.useState();
      react_1.useEffect(() => {
        store.onLoaded = () => setLoadedStore(store);
        const stop = store.start();
        return () => {
          store.onLoaded = void 0;
          setLoadedStore(void 0);
          stop();
        };
      }, [store]);
      if (!loadedStore) {
        return react_1.default.createElement(react_1.default.Fragment, null, loader);
      }
      return react_1.default.createElement(exports.LiquityStoreContext.Provider, { value: loadedStore }, children);
    };
    exports.LiquityStoreProvider = LiquityStoreProvider;
  }
});

// ../lib-react/dist/src/hooks/useLiquityStore.js
var require_useLiquityStore = __commonJS({
  "../lib-react/dist/src/hooks/useLiquityStore.js"(exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.useLiquityStore = void 0;
    var react_1 = require_react();
    var LiquityStoreProvider_1 = require_LiquityStoreProvider();
    var useLiquityStore = () => {
      const store = react_1.useContext(LiquityStoreProvider_1.LiquityStoreContext);
      if (!store) {
        throw new Error("You must provide a LiquityStore via LiquityStoreProvider");
      }
      return store;
    };
    exports.useLiquityStore = useLiquityStore;
  }
});

// ../lib-react/dist/src/utils/equals.js
var require_equals = __commonJS({
  "../lib-react/dist/src/utils/equals.js"(exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.equals = void 0;
    var hasOwnProperty = (o, key) => Object.prototype.hasOwnProperty.call(o, key);
    var shallowEquals = (a, b) => {
      const keysA = Object.keys(a);
      const keysB = Object.keys(b);
      return keysA.length === keysB.length && keysA.every((key) => hasOwnProperty(b, key) && Object.is(a[key], b[key]));
    };
    var isObject = (a) => a !== null && typeof a === "object";
    var equals = (a, b) => isObject(a) && isObject(b) ? shallowEquals(a, b) : Object.is(a, b);
    exports.equals = equals;
  }
});

// ../lib-react/dist/src/hooks/useLiquityReducer.js
var require_useLiquityReducer = __commonJS({
  "../lib-react/dist/src/hooks/useLiquityReducer.js"(exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.useLiquityReducer = void 0;
    var react_1 = require_react();
    var equals_1 = require_equals();
    var useLiquityStore_1 = require_useLiquityStore();
    var useLiquityReducer = (reduce, init) => {
      const store = useLiquityStore_1.useLiquityStore();
      const oldStore = react_1.useRef(store);
      const state = react_1.useRef(init(store.state));
      const [, rerender] = react_1.useReducer(() => ({}), {});
      const dispatch = react_1.useCallback((action) => {
        const newState = reduce(state.current, action);
        if (!equals_1.equals(newState, state.current)) {
          state.current = newState;
          rerender();
        }
      }, [reduce]);
      react_1.useEffect(() => store.subscribe((params) => dispatch({ type: "updateStore", ...params })), [
        store,
        dispatch
      ]);
      if (oldStore.current !== store) {
        state.current = init(store.state);
        oldStore.current = store;
      }
      return [state.current, dispatch];
    };
    exports.useLiquityReducer = useLiquityReducer;
  }
});

// ../lib-react/dist/src/hooks/useLiquitySelector.js
var require_useLiquitySelector = __commonJS({
  "../lib-react/dist/src/hooks/useLiquitySelector.js"(exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.useLiquitySelector = void 0;
    var react_1 = require_react();
    var equals_1 = require_equals();
    var useLiquityStore_1 = require_useLiquityStore();
    var useLiquitySelector = (select) => {
      const store = useLiquityStore_1.useLiquityStore();
      const [, rerender] = react_1.useReducer(() => ({}), {});
      react_1.useEffect(() => store.subscribe(({ newState, oldState }) => {
        if (!equals_1.equals(select(newState), select(oldState))) {
          rerender();
        }
      }), [store, select]);
      return select(store.state);
    };
    exports.useLiquitySelector = useLiquitySelector;
  }
});

// ../lib-react/dist/index.js
var require_dist = __commonJS({
  "../lib-react/dist/index.js"(exports) {
    var __createBinding = exports && exports.__createBinding || (Object.create ? function(o, m, k, k2) {
      if (k2 === void 0)
        k2 = k;
      Object.defineProperty(o, k2, { enumerable: true, get: function() {
        return m[k];
      } });
    } : function(o, m, k, k2) {
      if (k2 === void 0)
        k2 = k;
      o[k2] = m[k];
    });
    var __exportStar = exports && exports.__exportStar || function(m, exports2) {
      for (var p in m)
        if (p !== "default" && !Object.prototype.hasOwnProperty.call(exports2, p))
          __createBinding(exports2, m, p);
    };
    Object.defineProperty(exports, "__esModule", { value: true });
    __exportStar(require_LiquityStoreProvider(), exports);
    __exportStar(require_useLiquityStore(), exports);
    __exportStar(require_useLiquityReducer(), exports);
    __exportStar(require_useLiquitySelector(), exports);
  }
});
export default require_dist();
//# sourceMappingURL=@liquity_lib-react.js.map
